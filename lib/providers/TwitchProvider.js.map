{"version":3,"sources":["../../src/providers/TwitchProvider.js"],"names":["TwitchProvider","twitchClientID","twitchOAuth","clientID","oauth","Error","url","headers","req","json","body","ok","data","status","error","message","id","sendGetRequest","emotes"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;IAEqBA,c;AACjB,gCAA8C;AAAA,QAA/BC,cAA+B,QAA/BA,cAA+B;AAAA,QAAfC,WAAe,QAAfA,WAAe;AAAA;AAC1C,SAAKC,QAAL,GAAgBF,cAAhB;AACA,SAAKG,KAAL,GAAaF,WAAb;;AAEA,QAAI,KAAKC,QAAL,IAAiB,IAArB,EAA2B;AACvB,YAAM,IAAIE,KAAJ,CAAU,kCAAV,CAAN;AACH,KAFD,MAEO,IAAI,KAAKD,KAAL,IAAc,IAAlB,EAAwB;AAC3B,YAAM,IAAIC,KAAJ,CAAU,8BAAV,CAAN;AACH;AACJ;;;;;0GAED,iBAAsBC,GAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACoB,2BAAMA,GAAN,EAAW;AACvBC,kBAAAA,OAAO,EAAE;AACL,iCAAa,KAAKJ,QADb;AAEL,qCAAiB,YAAY,KAAKC;AAF7B;AADc,iBAAX,CADpB;;AAAA;AACQI,gBAAAA,GADR;AAAA;AAAA,uBAQqBA,GAAG,CAACC,IAAJ,EARrB;;AAAA;AAQQC,gBAAAA,IARR;;AAAA,qBAUQF,GAAG,CAACG,EAVZ;AAAA;AAAA;AAAA;;AAAA,iDAWeD,IAAI,CAACE,IAXpB;;AAAA;AAAA,sBAac,IAAIP,KAAJ,WAAaK,IAAI,CAACG,MAAlB,cAA4BH,IAAI,CAACI,KAAjC,gBAA4CJ,IAAI,CAACK,OAAjD,EAbd;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;yGAiBA,kBAAqBC,EAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACuB,KAAKC,cAAL,CAAoB,4DAA4DD,EAAhF,CADvB;;AAAA;AACQE,gBAAAA,MADR;AAAA,kDAEW,uCAAsBA,MAAtB,CAFX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O","sourcesContent":["import { normalizeTwitchEmotes } from \"../utils/EmoteUtils\";\r\nimport fetch from \"node-fetch\";\r\n\r\nexport default class TwitchProvider {\r\n    constructor ({ twitchClientID, twitchOAuth }) {\r\n        this.clientID = twitchClientID;\r\n        this.oauth = twitchOAuth;\r\n\r\n        if (this.clientID == null) {\r\n            throw new Error(\"Twitch Client ID cannot be null.\");\r\n        } else if (this.oauth == null) {\r\n            throw new Error(\"Twitch OAuth cannot be null.\")\r\n        }\r\n    }\r\n\r\n    async sendGetRequest (url) {\r\n        let req = await fetch(url, {\r\n            headers: {\r\n                \"Client-ID\": this.clientID,\r\n                \"Authorization\": \"Bearer \" + this.oauth\r\n            }\r\n        });\r\n\r\n        let body = await req.json();\r\n\r\n        if (req.ok) {\r\n            return body.data;\r\n        } else {\r\n            throw new Error(`${body.status} ${body.error} - ${body.message}`);\r\n        }\r\n    }\r\n\r\n    async getEmotesByID (id) {\r\n        let emotes = await this.sendGetRequest(\"https://api.twitch.tv/helix/chat/emotes?broadcaster_id=\" + id);\r\n        return normalizeTwitchEmotes(emotes);\r\n    }\r\n}"],"file":"TwitchProvider.js"}